import{s as o}from"./project.config-DUfbQKeR.js";import{g as r,i as l,a as n}from"./main-lEEsSsVM.js";import"./supabase-DjCBILTv.js";import"./pdf-yBvge-Eo.js";async function s(t){if(!t)return!1;try{const{data:a,error:e}=await o.from("whitelist").select("email").eq("email",t.toLowerCase()).single();return(e==null?void 0:e.code)==="PGRST116"?!1:e?(console.error("❌ Помилка whitelist:",e),!1):!!a}catch(a){return console.error("❌ Виняток whitelist:",a),!1}}async function c(){try{const{data:{session:t},error:a}=await o.auth.getSession();if(a||!t){console.warn("⛔ [Бухгалтерія] Немає Google сесії");const i=await r("index.html");window.location.replace(i);return}const e=t.user.email;if(!await s(e)){console.warn("⛔ [Бухгалтерія] Email не в whitelist:",e),await o.auth.signOut();const i=await r("index.html");window.location.replace(i);return}l()}catch(t){console.error("❌ [Бухгалтерія] Помилка перевірки:",t);const a=await n("index.html");window.location.replace(a)}}c();
