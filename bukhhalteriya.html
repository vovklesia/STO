<!DOCTYPE html>
<html lang="uk">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ë—É—Ö–≥–∞–ª—Ç–µ—Ä—ñ—è</title>

  <!-- üîí –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –∫–µ—à—É–≤–∞–Ω–Ω—è -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <!-- üîí Content Security Policy -->
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self' 'unsafe-inline' https://hprzwzqfdnryysqutenc.supabase.co https://cdnjs.cloudflare.com; connect-src 'self' https://hprzwzqfdnryysqutenc.supabase.co wss://hprzwzqfdnryysqutenc.supabase.co; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:;">

  <!-- üìä XLSX –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ - –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –ü–ï–†–®–û–Æ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <!-- üîí –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Google —Å–µ—Å—ñ—ó -->
  <script type="module" src="./src/ts/roboha/bukhhalteriya/bukhhalteriya_session_guard.ts"></script>

  <link rel="stylesheet" href="./src/scss/robocha/bukhhalteriya/_bukhhalteriya.scss" />
  <link rel="icon" type="image/svg+xml" href="/logo.png" />
</head>

<body>
  <div class="Bukhhalter-container">
    <div class="Bukhhalter-table-section">
      <div class="Bukhhalter-section-header">
        <div class="Bukhhalter-table-title" id="table-title">üë• –î–∞–Ω—ñ –ø—ñ–¥–ª–µ–≥–ª–∏—Ö</div>
        <a href="main.html" class="Bukhhalter-nav-link">üõ†Ô∏è‚Üê –°–¢–û</a>
      </div>

      <div class="Bukhhalter-total-sum" id="total-sum"></div>

      <!-- –¢–∞–±–ª–∏—Ü—è –ø—ñ–¥–ª–µ–≥–ª–∏—Ö -->
      <div id="podlegle-table-container">
        <table class="Bukhhalter-data-table" id="podlegle-table">
          <thead>
            <tr>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üí∞</span>
                  <span class="table-header-text">–†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ</span>
                </div>
              </th>
              <th class="pidlehli-dataOn">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìÖ</span>
                  <span class="table-header-text">–í—ñ–¥–∫—Ä–∏—Ç—Ç—è</span>
                </div>
              </th>
              <th class="pidlehli-dataOff">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìÖ</span>
                  <span class="table-header-text">–ó–∞–∫—Ä–∏—Ç—Ç—è</span>
                </div>
              </th>
              <th class="pidlehli-dodano">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìù</span>
                  <span class="table-header-text">–î–æ–¥–∞–Ω–æ</span>
                </div>
              </th>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üë®‚Äçüîß</span>
                  <span class="table-header-text">–ü–Ü–ë</span>
                </div>
              </th>
              <th class="pidlehli-akt">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìã</span>
                  <span class="table-header-text">–ê–∫—Ç_‚Ññ</span>
                </div>
              </th>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üë§</span>
                  <span class="table-header-text">–ö–ª—ñ—î–Ω—Ç</span>
                </div>
              </th>
              <th class="pidlehli-avto">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üöó</span>
                  <span class="table-header-text">–ê–≤—Ç–æ–º–æ–±—ñ–ª—å</span>
                </div>
              </th>
              <th class="pidlehli-robota">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üîß</span>
                  <span class="table-header-text">–†–æ–±–æ—Ç–∞</span>
                </div>
              </th>
              <th class="pidlehli-kilkist">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üî¢</span>
                  <span class="table-header-text">–ö—ñ–ª—å–∫—ñ—Å—Ç—å</span>
                </div>
              </th>
              <th class="pidlehli-money">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üí∂</span>
                  <span class="table-header-text">–¶—ñ–Ω–∞</span>
                </div>
              </th>
              <th class="pidlehli-money">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üíµ</span>
                  <span class="table-header-text">–°—É–º–∞</span>
                </div>
              </th>
              <th class="pidlehli-diya">
                <div class="table-header-cell">
                  <span class="table-header-emoji">‚ö°</span>
                  <span class="table-header-text">–î—ñ—ó</span>
                </div>
              </th>
            </tr>
          </thead>
          <tbody id="podlegle-tbody">
            <tr>
              <td colspan="13" class="Bukhhalter-no-data">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- –¢–∞–±–ª–∏—Ü—è –º–∞–≥–∞–∑–∏–Ω—É -->
      <div id="magazine-table-container" style="display: none;">
        <table class="Bukhhalter-data-table" id="magazine-table">
          <thead>
            <tr>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üí∞</span>
                  <span class="table-header-text">–†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ</span>
                </div>
              </th>
              <th class="magazine-dataOn">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìÖ</span>
                  <span class="table-header-text">–ü—Ä–∏—Ö—ñ–¥</span>
                </div>
              </th>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üè™</span>
                  <span class="table-header-text">–ú–∞–≥–∞–∑–∏–Ω</span>
                </div>
              </th>
              <th class="magazine-raxunok">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üßæ</span>
                  <span class="table-header-text">–†–∞—Ö—É–Ω–æ–∫</span>
                </div>
              </th>
              <th class="magazine-akt">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìã</span>
                  <span class="table-header-text">–ê–∫—Ç_‚Ññ</span>
                </div>
              </th>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üì¶</span>
                  <span class="table-header-text">–ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è</span>
                </div>
              </th>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìö</span>
                  <span class="table-header-text">–ö–∞—Ç–∞–ª–æ–≥</span>
                </div>
              </th>
              <th class="magazine-kilkist">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üî¢</span>
                  <span class="table-header-text">–ö—ñ–ª—å–∫—ñ—Å—Ç—å</span>
                </div>
              </th>
              <th class="magazine-money">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üí∂</span>
                  <span class="table-header-text">–¶—ñ–Ω–∞</span>
                </div>
              </th>
              <th class="magazine-money">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üíµ</span>
                  <span class="table-header-text">–°—É–º–∞</span>
                </div>
              </th>
              <th class="magazine-zalushok">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üì¶</span>
                  <span class="table-header-text">–ó–∞–ª–∏—à–æ–∫</span>
                </div>
              </th>
              <th class="magazine-zapchastyst">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üë§</span>
                  <span class="table-header-text">–ó–∞–ø-—Å—Ç</span>
                </div>
              </th>
              <th class="magazine-sklad">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üè¨</span>
                  <span class="table-header-text">–°–∫–ª–∞–¥</span>
                </div>
              </th>
              <th class="magazine-povernennya">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üöö</span>
                  <span class="table-header-text">–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è</span>
                </div>
              </th>
              <th class="magazine-diya">
                <div class="table-header-cell">
                  <span class="table-header-emoji">‚ö°</span>
                  <span class="table-header-text">–î—ñ—ó</span>
                </div>
              </th>
            </tr>
          </thead>
          <tbody id="magazine-tbody">
            <tr>
              <td colspan="15" class="Bukhhalter-no-data">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- –¢–∞–±–ª–∏—Ü—è –¥–µ—Ç–∞–ª–µ–π –ø–æ –∞–∫—Ç–∞–º -->
      <div id="details-table-container" style="display: none;">
        <table class="Bukhhalter-data-table" id="details-table">
          <thead>
            <tr>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üí∞</span>
                  <span class="table-header-text">–†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ</span>
                </div>
              </th>
              <th class="poAktam-dataOn">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìÖ</span>
                  <span class="table-header-text">–í—ñ–¥–∫—Ä–∏—Ç—Ç—è</span>
                </div>
              </th>
              <th class="poAktam-dataOff">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìÖ</span>
                  <span class="table-header-text">–ó–∞–∫—Ä–∏—Ç—Ç—è</span>
                </div>
              </th>
              <th class="poAktam-akt">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìã</span>
                  <span class="table-header-text">–ê–∫—Ç_‚Ññ</span>
                </div>
              </th>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üöó</span>
                  <span class="table-header-text">–ê–≤—Ç–æ–º–æ–±—ñ–ª—å</span>
                </div>
              </th>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üè™</span>
                  <span class="table-header-text">–ú–∞–≥–∞–∑–∏–Ω</span>
                </div>
              </th>
              <th class="poAktam-enuvannya">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üì¶</span>
                  <span class="table-header-text">–ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è</span>
                </div>
              </th>
              <th class="poAktam-katalog">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìö</span>
                  <span class="table-header-text">–ö–∞—Ç–∞–ª–æ–≥</span>
                </div>
              </th>
              <th class="poAktam-kilkist">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üî¢</span>
                  <span class="table-header-text">–ö—ñ–ª—å–∫—ñ—Å—Ç—å</span>
                </div>
              </th>
              <th class="poAktam-money">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üí∂</span>
                  <span class="table-header-text">–¶—ñ–Ω–∞</span>
                </div>
              </th>
              <th class="poAktam-money">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üíµ</span>
                  <span class="table-header-text">–°—É–º–∞</span>
                </div>
              </th>
              <th class="poAktam-sklad">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üè¨</span>
                  <span class="table-header-text">–°–∫–ª–∞–¥</span>
                </div>
              </th>
              <th class="poAktam-diya">
                <div class="table-header-cell">
                  <span class="table-header-emoji">‚ö°</span>
                  <span class="table-header-text">–î—ñ—ó</span>
                </div>
              </th>
            </tr>
          </thead>
          <tbody id="details-tbody">
            <tr>
              <td colspan="13" class="Bukhhalter-no-data">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- –¢–∞–±–ª–∏—Ü—è –≤–∏—Ç—Ä–∞—Ç -->
      <div id="vutratu-table-container" style="display: none;">
        <table class="Bukhhalter-data-table" id="vutratu-table">
          <thead>
            <tr>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üí∞</span>
                  <span class="table-header-text">–†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ</span>
                </div>
              </th>
              <th class="vutratu-dataOn">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìÖ</span>
                  <span class="table-header-text">–í—ñ–¥–∫—Ä–∏—Ç—Ç—è</span>
                </div>
              </th>
              <th class="vutratu-dataOff">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìÖ</span>
                  <span class="table-header-text">–ó–∞–∫—Ä–∏—Ç—Ç—è</span>
                </div>
              </th>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìÇ</span>
                  <span class="table-header-text">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</span>
                </div>
              </th>
              <th class="vutratu-akt">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìã</span>
                  <span class="table-header-text">–ê–∫—Ç_‚Ññ</span>
                </div>
              </th>
              <th class="vutratu-opis">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìù <input type="checkbox" id="include-client-description"
                      style="width: 18px; height: 18px; cursor: pointer; accent-color: #f5576c;">
                  </span>
                  <span class="table-header-text">–û–ø–∏—Å</span>
                </div>
              </th>
              <th class="vutratu-money">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üíµ</span>
                  <span class="table-header-text">–ü—Ä–∏–±—É—Ç–æ–∫</span>
                </div>
              </th>
              <th class="vutratu-suma-v-kasi">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üí∂</span>
                  <span class="table-header-text">–°—É–º–∞ –≤ –∫–∞—Å—ñ</span>
                </div>
              </th>
              <th>
                <div class="table-header-cell">
                  <span class="table-header-emoji">üí≥</span>
                  <span class="table-header-text">–°–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏</span>
                </div>
              </th>
              <th class="vutratu-prumitku">
                <div class="table-header-cell">
                  <span class="table-header-emoji">üìã <input type="checkbox" id="include-car-notes"
                      style="width: 18px; height: 18px; cursor: pointer; accent-color: #f5576c;">
                  </span>
                  <span class="table-header-text">–ü—Ä–∏–º—ñ—Ç–∫–∏</span>
                </div>
              </th>
              <th class="vutratu-diya">
                <div class="table-header-cell">
                  <span class="table-header-emoji">‚ö°</span>
                  <span class="table-header-text">–î—ñ—ó</span>
                </div>
              </th>
            </tr>
          </thead>
          <tbody id="vutratu-tbody">
            <tr>
              <td colspan="10" class="Bukhhalter-no-data">–ù–µ–º–∞—î –≤–∏—Ç—Ä–∞—Ç –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞ —Å–µ–∫—Ü—ñ—è -->
    <div class="Bukhhalter-control-section">
      <!-- –ö–Ω–æ–ø–∫–∏ –≤–∫–ª–∞–¥–æ–∫ -->
      <div class="Bukhhalter-tabs">
        <button id="tab-btn-magazine" class="Bukhhalter-tab-btn" style="display: none;"
          onclick="switchTab(event, 'magazine')">üè™ –°–∫–ª–∞–¥</button>

        <button id="tab-btn-podlegle" class="Bukhhalter-tab-btn" style="display: none;"
          onclick="switchTab(event, 'podlegle')">üë®‚Äçüîß –ó–∞—Ä–ø–ª–∞—Ç–∞</button>

        <button id="tab-btn-details" class="Bukhhalter-tab-btn" style="display: none;"
          onclick="switchTab(event, 'details')">‚öôÔ∏è –î–µ—Ç–∞–ª—ñ</button>

        <button id="tab-btn-vutratu" class="Bukhhalter-tab-btn" style="display: none;"
          onclick="switchTab(event, 'vutratu')">üí∞ –ü—Ä–∏–±—É—Ç–æ–∫</button>
      </div>

      <div class="Bukhhalter-form-container">
        <!-- –§–æ—Ä–º–∞ –°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ -->
        <div id="Bukhhalter-podlegle-section" class="Bukhhalter-form-section">
          <h2 class="Bukhhalter-section-title">üë®‚Äçüîß –û–±–ª—ñ–∫ —Ä–æ–±–æ—Ç–∏ –ø—ñ–¥–ª–µ–≥–ª–∏—Ö</h2>
          <div class="Bukhhalter-date-filter-toggle">
            <button type="button" class="date-filter-btn active" data-filter="open"
              title="–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –¥–∞—Ç—ñ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è">
              üìÖ –í—ñ–¥–∫—Ä–∏—Ç—Ç—è
            </button>
            <button type="button" class="date-filter-btn" data-filter="close" title="–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –¥–∞—Ç—ñ –∑–∞–∫—Ä–∏—Ç—Ç—è">
              üìÖ –ó–∞–∫—Ä–∏—Ç—Ç—è
            </button>
            <button type="button" class="date-filter-btn" data-filter="paid" title="–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –¥–∞—Ç—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É">
              üí∞ –†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ
            </button>
          </div>
          <div class="Bukhhalter-form-row">
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üìÖ –î–∞—Ç–∞ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –∞–∫—Ç—É</label>
              <input type="date" class="Bukhhalter-field-input" id="Bukhhalter-podlegle-date-open">
            </div>
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üìÖ –î–∞—Ç–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è –∞–∫—Ç—É</label>
              <input type="date" class="Bukhhalter-field-input" id="Bukhhalter-podlegle-date-close">
            </div>
          </div>
          <div class="Bukhhalter-form-row">
            <div class="Bukhhalter-field-group" style="flex: 4;">
              <label class="Bukhhalter-field-label">üë®‚Äçüîß –ü–Ü–ë</label>
              <select class="Bukhhalter-field-input" id="Bukhhalter-podlegle-name-select">
                <option value="">–û–±–µ—Ä—ñ—Ç—å –ü–Ü–ë (–∞–±–æ –∑–∞–ª–∏—à—Ç–µ –ø–æ—Ä–æ–∂–Ω—ñ–º –¥–ª—è –≤—Å—ñ—Ö)</option>
              </select>
            </div>
            <div class="Bukhhalter-field-group" style="flex: 1;">
              <label class="Bukhhalter-field-label">üìã ‚Ññ –ê–∫—Ç—É</label>
              <select class="Bukhhalter-field-input" id="Bukhhalter-podlegle-act-select">
                <option value="">–í—Å—ñ</option>
              </select>
            </div>
          </div>
          <div class="Bukhhalter-field-group">
            <label class="Bukhhalter-field-label">üõ†Ô∏è –†–æ–±–æ—Ç–∞</label>
            <input type="text" class="Bukhhalter-field-input" id="Bukhhalter-podlegle-work-input"
              placeholder="–í–≤–µ–¥—ñ—Ç—å –∞–±–æ –æ–±–µ—Ä—ñ—Ç—å —Ä–æ–±–æ—Ç—É">
          </div>
          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üìã –°—Ç–∞—Ç—É—Å –∞–∫—Ç—ñ–≤</label>
            <div>
              <input type="range" min="0" max="2" value="2" class="Bukhhalter-status-toggle"
                id="details-status-filter-toggle">
              <div class="Bukhhalter-toggle-labels">
                <span>–ó–∞–∫—Ä–∏—Ç—ñ</span>
                <span>–í—ñ–¥–∫—Ä–∏—Ç—ñ</span>
                <span>–í—Å—ñ</span>
              </div>
            </div>
          </div>
          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üí∞ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫</label>
            <div class="Bukhhalter-toggle-wrapper">
              <input type="range" min="0" max="2" value="2" class="Bukhhalter-payment-toggle"
                id="payment-filter-toggle">
              <div class="Bukhhalter-toggle-labels"><span>–†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ</span><span>–ù–µ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ</span><span>–í—Å—ñ</span>
              </div>
            </div>
          </div>
          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üíµ –ü—Ä–æ—Ü–µ–Ω—Ç —Ä–æ–±–æ—Ç–∏</label>
            <div class="Bukhhalter-toggle-wrapper">
              <input type="range" min="0" max="2" value="2" class="Bukhhalter-percentage-toggle"
                id="percentage-filter-toggle">
              <div class="Bukhhalter-toggle-labels"><span>–ú–µ–Ω—å—à–∏–π</span><span>–ë—ñ–ª—å—à–∏–π</span><span>–í—Å—ñ</span>
              </div>
            </div>
          </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –º–∞–≥–∞–∑–∏–Ω—É -->
        <div id="Bukhhalter-magazine-section" class="Bukhhalter-form-section Bukhhalter-active">
          <h2 class="Bukhhalter-section-title">üè™ –û–±–ª—ñ–∫ —Ç–æ–≤–∞—Ä—ñ–≤ –º–∞–≥–∞–∑–∏–Ω—É</h2>
          <div class="Bukhhalter-date-filter-toggle">
            <button type="button" class="date-filter-btn active" data-filter="open"
              title="–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –¥–∞—Ç—ñ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è">
              üìÖ –í—ñ–¥–∫—Ä–∏—Ç—Ç—è
            </button>
            <button type="button" class="date-filter-btn" data-filter="paid" title="–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –¥–∞—Ç—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É">
              üí∞ –†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ
            </button>
          </div>
          <div class="Bukhhalter-form-row">
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üìÖ –î–∞—Ç–∞ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –∞–∫—Ç—É</label>
              <input type="date" class="Bukhhalter-field-input" id="Bukhhalter-magazine-date-open">
            </div>
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üìÖ –î–∞—Ç–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è –∞–∫—Ç—É</label>
              <input type="date" class="Bukhhalter-field-input" id="Bukhhalter-magazine-date-close">
            </div>
          </div>

          <div class="Bukhhalter-form-row">
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üè™ –ú–∞–≥–∞–∑–∏–Ω</label>
              <input type="text" class="Bukhhalter-field-input" id="Bukhhalter-magazine-shop"
                placeholder="–ù–∞–∑–≤–∞ –º–∞–≥–∞–∑–∏–Ω—É">
            </div>
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üßæ –†–∞—Ö—É–Ω–æ–∫</label>
              <input type="text" class="Bukhhalter-field-input" id="Bukhhalter-magazine-bill"
                placeholder="–ù–æ–º–µ—Ä —Ä–∞—Ö—É–Ω–∫—É">
            </div>
          </div>

          <div class="Bukhhalter-form-row">
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üì¶ –ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è</label>
              <input type="text" class="Bukhhalter-field-input" id="Bukhhalter-magazine-item"
                placeholder="–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É">
            </div>
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üìö –ö–∞—Ç–∞–ª–æ–≥</label>
              <input type="text" class="Bukhhalter-field-input" id="Bukhhalter-magazine-catalog"
                placeholder="–ù–æ–º–µ—Ä –∫–∞—Ç–∞–ª–æ–≥—É">
            </div>
          </div>

          <div class="Bukhhalter-form-row">
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üë§ –ó–∞–ø—á–∞—Å—Ç–∏—Å—Ç</label>
              <select class="Bukhhalter-field-input" id="Bukhhalter-magazine-zapchastyst">
                <option value="">–í—Å—ñ –∑–∞–ø—á–∞—Å—Ç–∏—Å—Ç–∏</option>
              </select>
            </div>
          </div>

          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üí∞ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫</label>
            <div class="Bukhhalter-toggle-wrapper">
              <input type="range" min="0" max="2" value="2" class="Bukhhalter-payment-toggle"
                id="magazine-payment-filter-toggle">
              <div class="Bukhhalter-toggle-labels">
                <span>–†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ</span>
                <span>–ù–µ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ</span>
                <span>–í—Å—ñ</span>
              </div>
            </div>
          </div>

          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üì¶ –°—Ç–∞—Ç—É—Å –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –Ω–∞ —Å–∫–ª–∞–¥—ñ</label>
            <div class="Bukhhalter-toggle-wrapper">
              <input type="range" min="0" max="4" value="4" class="Bukhhalter-availability-toggle"
                id="magazine-availability-filter-toggle">
              <div class="Bukhhalter-toggle-labels-5">
                <span>–ü—Ä–∏—Å—É—Ç–Ω—ñ</span>
                <span>–ù—É–ª—å–æ–≤—ñ</span>
                <span>–í—ñ–¥—î–º–Ω—ñ</span>
                <span>–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è</span>
                <span>–í—Å—ñ</span>
              </div>
            </div>
          </div>

          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üè¨ –°–∫–ª–∞–¥</label>
            <div class="Bukhhalter-sklad-filter-wrapper" id="magazine-sklad-filter-container">
              <!-- –ö–Ω–æ–ø–∫–∏ —Å–∫–ª–∞–¥—ñ–≤ –±—É–¥—É—Ç—å –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
            </div>
          </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –¥–µ—Ç–∞–ª–µ–π –ø–æ –∞–∫—Ç–∞–º -->
        <div id="Bukhhalter-details-section" class="Bukhhalter-form-section">
          <h2 class="Bukhhalter-section-title">‚öôÔ∏è –î–µ—Ç–∞–ª—ñ –ø–æ –ê–∫—Ç–∞–º</h2>
          <div class="Bukhhalter-date-filter-toggle">
            <button type="button" class="date-filter-btn active" data-filter="open"
              title="–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –¥–∞—Ç—ñ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è">
              üìÖ –í—ñ–¥–∫—Ä–∏—Ç—Ç—è
            </button>
            <button type="button" class="date-filter-btn" data-filter="close" title="–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –¥–∞—Ç—ñ –∑–∞–∫—Ä–∏—Ç—Ç—è">
              üìÖ –ó–∞–∫—Ä–∏—Ç—Ç—è
            </button>
            <button type="button" class="date-filter-btn" data-filter="paid" title="–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –¥–∞—Ç—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É">
              üí∞ –†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ
            </button>
          </div>
          <div class="Bukhhalter-form-row">
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üìÖ –î–∞—Ç–∞ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –∞–∫—Ç—É</label>
              <input type="date" class="Bukhhalter-field-input" id="Bukhhalter-details-date-open">
            </div>
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üìÖ –î–∞—Ç–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è –∞–∫—Ç—É</label>
              <input type="date" class="Bukhhalter-field-input" id="Bukhhalter-details-date-close">
            </div>
          </div>
          <div class="Bukhhalter-form-row">
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üì¶ –ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è</label>
              <input type="text" class="Bukhhalter-field-input" id="Bukhhalter-details-item"
                placeholder="–í–≤–µ–¥—ñ—Ç—å –∞–±–æ –æ–±–µ—Ä—ñ—Ç—å –Ω–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è">
            </div>
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üìö –ö–∞—Ç–∞–ª–æ–≥</label>
              <input type="text" class="Bukhhalter-field-input" id="Bukhhalter-details-catalog"
                placeholder="–í–≤–µ–¥—ñ—Ç—å –∞–±–æ –æ–±–µ—Ä—ñ—Ç—å –ö–∞—Ç–∞–ª–æ–≥ –Ω–æ–º–µ—Ä">
            </div>
          </div>
          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üìã –°—Ç–∞—Ç—É—Å –∞–∫—Ç—ñ–≤</label>
            <div class="Bukhhalter-toggle-wrapper">
              <input type="range" min="0" max="2" value="2" class="Bukhhalter-status-toggle"
                id="poAktam-status-filter-toggle">
              <div class="Bukhhalter-toggle-labels">
                <span>–ó–∞–∫—Ä–∏—Ç—ñ</span>
                <span>–í—ñ–¥–∫—Ä–∏—Ç—ñ</span>
                <span>–í—Å—ñ</span>
              </div>
            </div>
          </div>
          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üí∞ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫</label>
            <div class="Bukhhalter-toggle-wrapper">
              <input type="range" min="0" max="2" value="2" class="Bukhhalter-payment-toggle"
                id="poAktam-payment-filter-toggle">
              <div class="Bukhhalter-toggle-labels"><span>–†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ</span><span>–ù–µ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ</span><span>–í—Å—ñ</span>
              </div>
            </div>
          </div>
          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üíµ –ü—Ä–æ—Ü–µ–Ω—Ç —Ä–æ–±–æ—Ç–∏</label>
            <div class="Bukhhalter-toggle-wrapper">
              <input type="range" min="0" max="2" value="2" class="Bukhhalter-percentage-toggle"
                id="poAktam-percentage-filter-toggle">
              <div class="Bukhhalter-toggle-labels"><span>–ú–µ–Ω—å—à–∏–π</span><span>–ë—ñ–ª—å—à–∏–π</span><span>–í—Å—ñ</span>
              </div>
            </div>
          </div>

          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üè¨ –°–∫–ª–∞–¥</label>
            <div class="Bukhhalter-sklad-filter-wrapper" id="details-sklad-filter-container">
              <!-- –ö–Ω–æ–ø–∫–∏ —Å–∫–ª–∞–¥—ñ–≤ –±—É–¥—É—Ç—å –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
            </div>
          </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –ø—Ä–∏–±—É—Ç–∫—É -->
        <div id="Bukhhalter-vutratu-section" class="Bukhhalter-form-section">
          <h2 class="Bukhhalter-section-title">üí∞ –û–±–ª—ñ–∫ –ø—Ä–∏–±—É—Ç–∫—É —Ç–∞ –≤–∏—Ç—Ä–∞—Ç</h2>
          <div class="Bukhhalter-date-filter-toggle">
            <button type="button" class="date-filter-btn active" data-filter="open"
              title="–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –¥–∞—Ç—ñ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è">
              üìÖ –í—ñ–¥–∫—Ä–∏—Ç—Ç—è
            </button>
            <button type="button" class="date-filter-btn" data-filter="close" title="–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –¥–∞—Ç—ñ –∑–∞–∫—Ä–∏—Ç—Ç—è">
              üìÖ –ó–∞–∫—Ä–∏—Ç—Ç—è
            </button>
            <button type="button" class="date-filter-btn" data-filter="paid" title="–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ –¥–∞—Ç—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É">
              üí∞ –†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ
            </button>
          </div>

          <!-- –î–û–î–ê–ô –¶–ï -->
          <!--           <div class="Bukhhalter-form-row" style="margin-top: 15px; margin-bottom: 10px;">
            <div class="Bukhhalter-field-group">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" id="include-client-description"
                  style="width: 18px; height: 18px; cursor: pointer; accent-color: #667eea;">
                <span style="font-weight: 600; color: #333;">üìù –ü—ñ–¥—Ç—è–≥—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∞ –≤ –û–ø–∏—Å</span>
              </label>
            </div>
            <div class="Bukhhalter-field-group">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" id="include-car-notes"
                  style="width: 18px; height: 18px; cursor: pointer; accent-color: #f5576c;">
                <span style="font-weight: 600; color: #333;">üìã –ü—ñ–¥—Ç—è–≥—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –∞–≤—Ç–æ –≤ –ü—Ä–∏–º—ñ—Ç–∫–∏</span>
              </label>
            </div>
          </div> -->

          <div class="Bukhhalter-form-row">
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üìÖ –î–∞—Ç–∞ –≤—ñ–¥</label>
              <input type="date" class="Bukhhalter-field-input" id="Bukhhalter-vutratu-date-from">
            </div>
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üìÖ –î–∞—Ç–∞ –¥–æ</label>
              <input type="date" class="Bukhhalter-field-input" id="Bukhhalter-vutratu-date-to">
            </div>
          </div>
          <div class="Bukhhalter-form-row">
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üìÇ –ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label>
              <select class="Bukhhalter-field-input" id="Bukhhalter-vutratu-category">
                <option value="">–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é</option>
              </select>
            </div>
            <div class="Bukhhalter-field-group">
              <label class="Bukhhalter-field-label">üí≥ –°–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏</label>
              <select class="Bukhhalter-field-input" id="Bukhhalter-vutratu-payment-method">
                <option value="">–û–±–µ—Ä—ñ—Ç—å —Å–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏</option>
              </select>
            </div>
          </div>

          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üí≤ –¢–∏–ø –æ–ø–µ—Ä–∞—Ü—ñ—ó</label>
            <div class="Bukhhalter-toggle-wrapper">
              <input type="range" min="0" max="2" value="2" class="Bukhhalter-expense-type-toggle"
                id="vutratu-type-filter-toggle">
              <div class="Bukhhalter-toggle-labels-2">
                <span>–ü—Ä–∏–±—É—Ç–æ–∫</span>
                <span>–í–∏—Ç—Ä–∞—Ç–∏</span>
                <span>–í—Å—ñ</span>
              </div>
            </div>
          </div>

          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üìã –°—Ç–∞—Ç—É—Å –∞–∫—Ç—ñ–≤</label>
            <div>
              <input type="range" min="0" max="2" value="2" class="Bukhhalter-status-toggle"
                id="vutratu-status-filter-toggle">
              <div class="Bukhhalter-toggle-labels">
                <span>–ó–∞–∫—Ä–∏—Ç—ñ</span>
                <span>–í—ñ–¥–∫—Ä–∏—Ç—ñ</span>
                <span>–í—Å—ñ</span>
              </div>
            </div>
          </div>

          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üí∞ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫</label>
            <div class="Bukhhalter-toggle-wrapper">
              <input type="range" min="0" max="2" value="2" class="Bukhhalter-payment-toggle"
                id="vutratu-payment-filter-toggle">
              <div class="Bukhhalter-toggle-labels">
                <span>–†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–æ</span>
                <span>–°—É–º–∞ –≤ –∫–∞—Å—ñ</span>
                <span>–í—Å—ñ</span>
              </div>
            </div>
          </div>

          <div class="Bukhhalter-toggle-container">
            <label class="Bukhhalter-field-label">üè∑Ô∏è –ó–Ω–∏–∂–∫–∞</label>
            <div class="Bukhhalter-toggle-wrapper">
              <input type="range" min="0" max="2" value="2" class="Bukhhalter-payment-toggle"
                id="vutratu-discount-filter-toggle">
              <div class="Bukhhalter-toggle-labels">
                <span>–ë–µ–∑ –∑–Ω–∏–∂–∫–∏</span>
                <span>–ó–Ω–∏–∂–∫–∞</span>
                <span>–í—Å—ñ</span>
              </div>
            </div>
          </div>

          <div class="Bukhhalter-field-group">
            <button class="Bukhhalter-action-button Bukhhalter-purple-button" onclick="openExpenseModal()">
              üí∞ –î–æ–¥–∞—Ç–∏ –≤–∏—Ç—Ä–∞—Ç—É
            </button>
          </div>

        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ (–∑–∞–≥–∞–ª—å–Ω—ñ –¥–ª—è –≤—Å—ñ—Ö –≤–∫–ª–∞–¥–æ–∫) -->
        <div class="Bukhhalter-button-container">
          <div class="Bukhhalter-button-row">
            <button id="Bukhhalter-search-button" class="Bukhhalter-action-button Bukhhalter-add-button"
              onclick="addRecord(event)">üîç –ü–æ—à—É–∫</button>
            <button class="Bukhhalter-action-button Bukhhalter-clear-button" onclick="clearForm()">üóëÔ∏è
              –û—á–∏—Å—Ç–∏—Ç–∏</button>
          </div>
          <div class="Bukhhalter-button-row">
            <button class="Bukhhalter-action-button Bukhhalter-excel-button" onclick="downloadToExcel()">üì•
              Excel</button>
            <button id="Bukhhalter-calc-button" type="button" class="Bukhhalter-action-button Bukhhalter-save-btn"
              onclick="runMassPaymentCalculation(event)">
              üí∞ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="expense-modal" class="expense-modal" style="display: none;">
    <div class="expense-modal-content">
      <div class="expense-modal-header">
        <h2 id="expense-modal-title">–î–æ–¥–∞—Ç–∏ –≤–∏—Ç—Ä–∞—Ç—É</h2>
        <button class="expense-mode-switcher mode-add" onclick="cycleExpenseMode()"
          id="expense-mode-btn">–î–æ–¥–∞—Ç–∏</button>
        <button class="expense-modal-close" onclick="closeExpenseModal()">X</button>
      </div>
      <div class="expense-modal-body">
        <div class="Bukhhalter-form-row">
          <div class="Bukhhalter-field-group">
            <label class="Bukhhalter-field-label">–î–∞—Ç–∞</label>
            <input type="date" class="Bukhhalter-field-input" id="expense-modal-date">
          </div>
          <div class="Bukhhalter-field-group">
            <label class="Bukhhalter-field-label">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label>
            <select class="Bukhhalter-field-input" id="expense-modal-category">
              <option value="">–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é</option>
            </select>
          </div>
        </div>
        <div class="Bukhhalter-form-row">
          <div class="Bukhhalter-field-group">
            <label class="Bukhhalter-field-label">–°–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏</label>
            <select class="Bukhhalter-field-input" id="expense-modal-payment-method">
              <option value="">–û–±–µ—Ä—ñ—Ç—å —Å–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏</option>
            </select>
          </div>
          <div class="Bukhhalter-field-group">
            <label class="Bukhhalter-field-label">–°—É–º–∞</label>
            <input type="text" class="Bukhhalter-field-input" id="expense-modal-amount" placeholder="0"
              oninput="formatAmountWithSpaces(this)">
          </div>
        </div>
        <div class="Bukhhalter-field-group">
          <label class="Bukhhalter-field-label">–û–ø–∏—Å –≤–∏—Ç—Ä–∞—Ç</label>
          <textarea class="Bukhhalter-field-input Bukhhalter-field-textarea" id="expense-modal-description"
            placeholder="–í–≤–µ–¥—ñ—Ç—å –æ–ø–∏—Å" rows="3" oninput="autoResizeTextarea(this)"></textarea>
        </div>
        <div class="Bukhhalter-field-group">
          <label class="Bukhhalter-field-label">–ü—Ä–∏–º—ñ—Ç–∫–∏</label>
          <textarea class="Bukhhalter-field-input Bukhhalter-field-textarea" id="expense-modal-notes"
            placeholder="–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è" rows="3" oninput="autoResizeTextarea(this)"></textarea>
        </div>
        <div class="expense-modal-footer">
          <button class="Bukhhalter-action-button Bukhhalter-save-btn"
            onclick="saveExpenseFromModal()">–ó–∞–ø–∏—Å–∞—Ç–∏</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–∏–π –º–æ–¥—É–ª—å –¥–æ–¥–∞—Ç–∫—É -->
  <script type="module" src="./src/ts/main.ts"></script>
</body>

</html>